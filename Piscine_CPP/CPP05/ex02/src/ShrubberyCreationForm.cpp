/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ShrubberyCreationForm.cpp                          :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: ramzerk <ramzerk@student.42.fr>            +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2024/11/30 16:36:56 by ramzerk           #+#    #+#             */
/*   Updated: 2024/11/30 16:38:25 by ramzerk          ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include <fstream>
#include <iostream>
#include "ShrubberyCreationForm.hpp"

ShrubberyCreationForm::ShrubberyCreationForm()
	: AForm("ShrubberyCreationForm", "Default", 145, 137) {}

ShrubberyCreationForm::ShrubberyCreationForm(std::string target)
	: AForm("ShrubberyCreationForm", target, 145, 137) {}

ShrubberyCreationForm::ShrubberyCreationForm(const ShrubberyCreationForm &source)
	: AForm(source) {}

ShrubberyCreationForm::~ShrubberyCreationForm() {}

ShrubberyCreationForm& ShrubberyCreationForm::operator=(const ShrubberyCreationForm& source) {
	AForm::operator=(source);
	return *this;
}

void ShrubberyCreationForm::execute(Bureaucrat const & executor) const {
	checkRequirements(executor);

	const std::string filename = this->_target + "_shrubbery";
	const std::string tree = 
		"                            A\n"
		"                           / \\\n"
		"                          J   L\n"
		"                    ------'   `------\n"
		"                     `.           .'\n"
		"                       `.       .'\n"
		"                        /       \\\n"
		"                       J   .'.   L\n"
		"                       |.' | |`. |\n"
		"                       '   | |//`\n"
		"                      .-.-. _ _ _  |\n"
		"                     /| | |(/|||||_|\n"
		"                     _| | |/-'`'`'/|\n"
		"                    / \\/|   o  + __.- /(\n"
		"                   |  '|/| -|/(||||(_V_)\n"
		"                   `._.| |/_/_)`-'' ///_<\n"
		"                       >///\\\\\\//==<<<=\n"
		"                     _ >>>\\\\\\>//<__<<<-'\n"
		"                    / `-._>>>.-'   |<<\n"
		"                   J     _.))     /<<<<\n"
		"               v   |  .-'' |/__   |<<<||_\n"
		"            \\\\||| `-> _/ / \\  `-<<<<<<*** **\n"
		"          \\\\**|||| /    /><<\\    \\<<<********\n"
		"            >>**////    /<>>>>`.   |****** <<_\\_\\\n"
		"             >>***/_  .'>>><>>><\\  |*****<<<|_|_|\n"
		"          .-' >***>>|/>//>><\\\\**|/\\|***<<<<<|_|_|\n"
		"          \\.-' \\***<<<>>///\\\\******<<>><>>*****\\\\\\\\.-.-.-<<<\n"
		"           \\-'_.J--.<<<<>><<****>>///(\\|\\)|(//<<<,\n"
		"          (   )|(-'  (>>><<****<\\\\)_.><<<<-\n"
		"         .-`-'_)\\-.--.\\>>><*****//||>(\\ (\\\\_.\\<<<< .-\n"
		"        .' _.-'()\\`.**>>//****<<<>><<`-``-``-`<<.-' _\n"
		"    .--'_.'>>>><>>`\\.***(`._.-.<<<<<<(_____``<.'_.-' |<\n"
		"   /-'   >><<>>>>>//<>>>/|\\ |  /<<>><|     `-._/      L\n"
		"          ->>.<>><>>>>>/|| \\.|.'|<<>\\\\|  .-----'|._    |\n"
		"  .--._ >><.' \\>>>>>>///||  |  |<<>><|.'       )-----'`.\n"
		"  |   _.--'    |///////\\\\-----'<>>>>>==\\\\<><>>>>< ===::===>>><****| .'`.`_ (   `-.   .--'\n"
		" /    .'>><>>)_ -->>>>===::::==>>******|/>>>/  `.  .--.`-.|\n"
		"/    />>>>>>>'`'`'`-`<===:::<<< *****(\\ .-.<(   )-(   )\n"
		"/.'| />>>>>>>.-.-.-._\\|> =//||\\\\******-'@--'>>`-'<<\\`-'`._\n"
		"   |/>>>>>>>-'`'`'`-.\\\\>>==<<<<***.'\\ |_|)_|<<<<<<< \\_ `- `.\n"
		"  / >>>>>>.-..''`'`-.\\\\.->>>><<>(  /(\\\\\\/// <<<<<=    \\_ .-' \n"
		" /-' >>>----\\((::::)))// /><>>**|   (\\\\\\///<<<<---.\n"
		"|.'  >>>| | | |\\__.'.'>>>>>****.'/ (\\\\////<<<<-`-`\n"
		" `   >>>|-|-| |>>>>>>>>>>**** .--. /_\\\\////<<<|_|_|<<<<\n"
		"     >>>|_|_|/>><>><<>*****vv(    V  `.\\\\<<<>>>|_|_|<<<<\n"
		"     ////>>>>>`.>>>>******>>><`--'\\   /<<<<<>>>>><<<<<<<\n"
		"       '' ///>>>>><<>>*****>>>><<<<<<`-'<<<<<<>><<<><<<<<<<\n"
		"         ''    ->>>>><<>///>>>>><<<<<<\\\\\\\\\\><<<<<>>><<<<\\\\\n"
		"                 ////<<>><<<>>>><<<<>\\\\\\\\\\\\\\>><\\\\\\\\\\\\\n"
		"                '' / ////////>>><<<\\\\\\\\\\\\\\<  \\\\ \\\\\\\\ \\\n"
		"                     /|| .////|||\\\\\\\\\\\\\\\n"
		"                        (MMMMMMMMMMMMMMMMMMM)\n"
		"                        |`----.MMMMMMMM.---'|\n"
		"                        `---.____   ____.---'\n"
		"                         |       \"\"\"       |\n"
		"                         |                 |\n"
		"                         |                 |\n"
		"                         |                 |\n"
		"                         |                 |\n"
		"  VK                   (                 )\n"
		"                          `----._____.----'\n";
std::ofstream out_file(filename.c_str());

	if (out_file.is_open())
	{
		out_file << tree;
		out_file.close();
	}
	else
		throw WriteException();
}

const char* ShrubberyCreationForm::WriteException::what() const throw() { return "Cannot write to file"; }